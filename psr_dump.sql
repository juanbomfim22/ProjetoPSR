create table curso (id integer generated by default as identity, nome varchar(255), periodo integer, sigla integer, instituicao_id integer, primary key (id));
create table curso_disciplina (curso_id integer not null, disciplina_id integer not null);
create table disciplina (id integer generated by default as identity, carga_horaria integer, codigo varchar(255), nome varchar(255), docente_id integer, primary key (id));
create table docente (id integer generated by default as identity, nome varchar(255), turno_id integer not null, primary key (id));
create table grade (id integer generated by default as identity, hora_criacao timestamp, nome varchar(255), turno_id integer, primary key (id));
create table instituicao (id integer generated by default as identity, cnpj varchar(255), nome varchar(255), sigla varchar(255), usuario_id integer, primary key (id));
create table perfis (usuario_id integer not null, perfis integer);
create table restricao (id integer generated by default as identity, docente_id integer not null, primary key (id));
create table restricao_restricoes_de_horario (restricao_id integer not null, restricoes_de_horario varchar(255), restricoes_de_horario_key varchar(255) not null, primary key (restricao_id, restricoes_de_horario_key));
create table turno (id integer generated by default as identity, duracao_aula integer check (duracao_aula>=0 AND duracao_aula<=60), hora_inicio time, nome varchar(255), qtd_aulas_dia integer check (qtd_aulas_dia>=0 AND qtd_aulas_dia<=24), instituicao_id integer, primary key (id));
create table turno_dias_da_semana (turno_id integer not null, dias_da_semana varchar(255));
create table usuario (id integer generated by default as identity, email varchar(255), email_verified boolean not null, imagem_perfil varchar(255), nome varchar(255), provider varchar(255) not null, provider_id varchar(255), senha varchar(255), primary key (id));
alter table usuario add constraint UK_5171l57faosmj8myawaucatdw unique (email);
alter table curso add constraint FKdaahyrexranp0wm6it9utgbab foreign key (instituicao_id) references instituicao;
alter table curso_disciplina add constraint FKr7reuo2yb00hp5wbmesioinld foreign key (disciplina_id) references disciplina;
alter table curso_disciplina add constraint FKc95rlu26gguho8xa8amq8jajq foreign key (curso_id) references curso;
alter table disciplina add constraint FKacfef7809enx5vdqun2qky13r foreign key (docente_id) references docente;
alter table docente add constraint FKmvww93xoykl6uw1ecehixwd5v foreign key (turno_id) references turno;
alter table grade add constraint FK9cyg0x48m7s662yaampkqhjqy foreign key (turno_id) references turno;
alter table instituicao add constraint FKk0eq2ivm1bswjoaclx2vu25x4 foreign key (usuario_id) references usuario;
alter table perfis add constraint FKiso72ajmkk36lw7dqjva1h8hl foreign key (usuario_id) references usuario;
alter table restricao add constraint FKs0pjbm17o71ijwedxltrqrvas foreign key (docente_id) references docente;
alter table restricao_restricoes_de_horario add constraint FKfjswkk6kdk9mnje76yp90q1a foreign key (restricao_id) references restricao;
alter table turno add constraint FKkimqnjw3u2xc1m9pkdiveg7sk foreign key (instituicao_id) references instituicao;
alter table turno_dias_da_semana add constraint FKobi4bplfvemdg8lsak962p4ho foreign key (turno_id) references turno;
create table curso (id integer generated by default as identity, nome varchar(255), periodo integer, sigla integer, instituicao_id integer, primary key (id));
create table curso_disciplina (curso_id integer not null, disciplina_id integer not null);
create table disciplina (id integer generated by default as identity, carga_horaria integer, codigo varchar(255), nome varchar(255), docente_id integer, primary key (id));
create table docente (id integer generated by default as identity, nome varchar(255), turno_id integer not null, primary key (id));
create table grade (id integer generated by default as identity, hora_criacao timestamp, nome varchar(255), turno_id integer, primary key (id));
create table instituicao (id integer generated by default as identity, cnpj varchar(255), nome varchar(255), sigla varchar(255), usuario_id integer, primary key (id));
create table perfis (usuario_id integer not null, perfis integer);
create table restricao (id integer generated by default as identity, docente_id integer not null, primary key (id));
create table restricao_restricoes_de_horario (restricao_id integer not null, restricoes_de_horario varchar(255), restricoes_de_horario_key varchar(255) not null, primary key (restricao_id, restricoes_de_horario_key));
create table turno (id integer generated by default as identity, duracao_aula integer check (duracao_aula>=0 AND duracao_aula<=60), hora_inicio time, nome varchar(255), qtd_aulas_dia integer check (qtd_aulas_dia>=0 AND qtd_aulas_dia<=24), instituicao_id integer, primary key (id));
create table turno_dias_da_semana (turno_id integer not null, dias_da_semana varchar(255));
create table usuario (id integer generated by default as identity, email varchar(255), email_verified boolean not null, imagem_perfil varchar(255), nome varchar(255), provider varchar(255) not null, provider_id varchar(255), senha varchar(255), primary key (id));
alter table usuario add constraint UK_5171l57faosmj8myawaucatdw unique (email);
alter table curso add constraint FKdaahyrexranp0wm6it9utgbab foreign key (instituicao_id) references instituicao;
alter table curso_disciplina add constraint FKr7reuo2yb00hp5wbmesioinld foreign key (disciplina_id) references disciplina;
alter table curso_disciplina add constraint FKc95rlu26gguho8xa8amq8jajq foreign key (curso_id) references curso;
alter table disciplina add constraint FKacfef7809enx5vdqun2qky13r foreign key (docente_id) references docente;
alter table docente add constraint FKmvww93xoykl6uw1ecehixwd5v foreign key (turno_id) references turno;
alter table grade add constraint FK9cyg0x48m7s662yaampkqhjqy foreign key (turno_id) references turno;
alter table instituicao add constraint FKk0eq2ivm1bswjoaclx2vu25x4 foreign key (usuario_id) references usuario;
alter table perfis add constraint FKiso72ajmkk36lw7dqjva1h8hl foreign key (usuario_id) references usuario;
alter table restricao add constraint FKs0pjbm17o71ijwedxltrqrvas foreign key (docente_id) references docente;
alter table restricao_restricoes_de_horario add constraint FKfjswkk6kdk9mnje76yp90q1a foreign key (restricao_id) references restricao;
alter table turno add constraint FKkimqnjw3u2xc1m9pkdiveg7sk foreign key (instituicao_id) references instituicao;
alter table turno_dias_da_semana add constraint FKobi4bplfvemdg8lsak962p4ho foreign key (turno_id) references turno;
create table curso (id int4 generated by default as identity, nome varchar(255), periodo int4, sigla int4, instituicao_id int4, primary key (id));
create table curso_disciplina (curso_id int4 not null, disciplina_id int4 not null);
create table disciplina (id int4 generated by default as identity, carga_horaria int4, codigo varchar(255), nome varchar(255), docente_id int4, primary key (id));
create table docente (id int4 generated by default as identity, nome varchar(255), turno_id int4 not null, primary key (id));
create table grade (id int4 generated by default as identity, hora_criacao timestamp, nome varchar(255), turno_id int4, primary key (id));
create table instituicao (id int4 generated by default as identity, cnpj varchar(255), nome varchar(255), sigla varchar(255), usuario_id int4, primary key (id));
create table perfis (usuario_id int4 not null, perfis int4);
create table restricao (id int4 generated by default as identity, docente_id int4 not null, primary key (id));
create table restricao_restricoes_de_horario (restricao_id int4 not null, restricoes_de_horario varchar(255), restricoes_de_horario_key varchar(255) not null, primary key (restricao_id, restricoes_de_horario_key));
create table turno (id int4 generated by default as identity, duracao_aula int4 check (duracao_aula>=0 AND duracao_aula<=60), hora_inicio time, nome varchar(255), qtd_aulas_dia int4 check (qtd_aulas_dia>=0 AND qtd_aulas_dia<=24), instituicao_id int4, primary key (id));
create table turno_dias_da_semana (turno_id int4 not null, dias_da_semana varchar(255));
create table usuario (id int4 generated by default as identity, email varchar(255), email_verified boolean not null, imagem_perfil varchar(255), nome varchar(255), provider varchar(255) not null, provider_id varchar(255), senha varchar(255), primary key (id));
alter table if exists usuario add constraint UK_5171l57faosmj8myawaucatdw unique (email);
alter table if exists curso add constraint FKdaahyrexranp0wm6it9utgbab foreign key (instituicao_id) references instituicao;
alter table if exists curso_disciplina add constraint FKr7reuo2yb00hp5wbmesioinld foreign key (disciplina_id) references disciplina;
alter table if exists curso_disciplina add constraint FKc95rlu26gguho8xa8amq8jajq foreign key (curso_id) references curso;
alter table if exists disciplina add constraint FKacfef7809enx5vdqun2qky13r foreign key (docente_id) references docente;
alter table if exists docente add constraint FKmvww93xoykl6uw1ecehixwd5v foreign key (turno_id) references turno;
alter table if exists grade add constraint FK9cyg0x48m7s662yaampkqhjqy foreign key (turno_id) references turno;
alter table if exists instituicao add constraint FKk0eq2ivm1bswjoaclx2vu25x4 foreign key (usuario_id) references usuario;
alter table if exists perfis add constraint FKiso72ajmkk36lw7dqjva1h8hl foreign key (usuario_id) references usuario;
alter table if exists restricao add constraint FKs0pjbm17o71ijwedxltrqrvas foreign key (docente_id) references docente;
alter table if exists restricao_restricoes_de_horario add constraint FKfjswkk6kdk9mnje76yp90q1a foreign key (restricao_id) references restricao;
alter table if exists turno add constraint FKkimqnjw3u2xc1m9pkdiveg7sk foreign key (instituicao_id) references instituicao;
alter table if exists turno_dias_da_semana add constraint FKobi4bplfvemdg8lsak962p4ho foreign key (turno_id) references turno;
